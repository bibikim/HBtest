<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTO Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.khb.pay.mapper.CourseMapper">

	<select id="selectCourseListByMap" parameterType="Map" resultType="CourseDTO">
		SELECT COURSE_NO, CO_TITLE, C0_INTRO, CO_CTNT, CO_PRICE, CO_TEACHER, UPLOAD_DATE, THUMB_PATH, THUMB_ORIGIN, FILESYSEM, HAS_THUMBNAIL
		  FROM COURSE
		 ORDER BY COURSE_NO DESC
		 LIMIT #{begin}, #{recordPerPage}
	</select>
	
	<!-- 강의 상세 -->
	<select id="selectCourseByNo" parameterType="int" resultType="CourseDTO">
		SELECT COURSE_NO, CO_TITLE, C0_INTRO, CO_CTNT, CO_PRICE, CO_TEACHER, UPLOAD_DATE, THUMB_PATH, THUMB_ORIGIN, FILESYSEM, HAS_THUMBNAIL
		  FROM COURSE
		 WHERE COURSE_NO = #{courseNo}
	</select>

	<!-- 강의 글쓰기 -->
	<insert id="insertCourse" parameterType="CourseDTO">
		INSERT INTO COURSE
			(COURSE_NO, CO_TITLE, C0_INTRO, CO_CTNT, CO_PRICE, CO_TEACHER, UPLOAD_DATE, THUMB_PATH, THUMB_ORIGIN, FILESYSEM, HAS_THUMBNAIL)
		VALUES
			(#{courseNo}, #{coTitle}, #{coIntro}, #{coCtnt}, #{coPrice}, #{coTeacher}, NOW(), #{thumbPath}, #{thumbOrigin}, #{filesystem}, #{hasThumbnail})
	</insert>
	
	
	<delete id="deleteCourse" parameterType="int">
		DELETE 
		  FROM COURSE
		 WHERE COURSE_NO = #{courseNo}
	</delete>
	
	<update id="updateCourse" parameterType="CourseDTO" >
		UPDATE
		   SET CO_TITLE = #{coTitle}, C0_INTRO = #{coIntro}, CO_CTNT =  #{coCtnt}, CO_PRICE = #{coPrice}, CO_TEACHER = #{coTeacher}
		 WHERE COURSE_NO = #{courseNo}
	</update>
	
</mapper>